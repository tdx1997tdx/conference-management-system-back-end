<!DOCTYPE html>
<head>
    <meta charset="UTF-8">
    <title>Login</title>
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <script src="vue/vue.js"></script>
    <script src="vue/axios.min.js"></script>
</head>
<body>
<div id="app">
    <form class="form-horizontal" role="form">
        <div class="form-group">
            <label for="username" class="col-sm-2 control-label">用户名</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="username" placeholder="请输入用户名" v-model="username" style="width:300px; height:40px;">
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-2 control-label">密码</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="password" placeholder="请输入密码" v-model="password" style="width:300px; height:40px;">
            </div>
        </div>
        <div class="form-group">

            <div class="col-sm-offset-2 col-sm-10">
                <p>{{ msg }}</p>
                <input type="button" class="btn btn-default" value="登录" @click="submit">
            </div>
        </div>
        <a href="/">返回主界面</a>
        <a href="/regist">注册账号</a>
    </form>
</div>
<script type="application/javascript">
    var vm = new Vue({
        el: '#app', //表示当前我们new的这个实例要控制在页面上的那个区域
        //这就是我们的mv层
        data: { //存放的是el属性用到的数据
            username:'',
            password:'',
            msg: ''
        },
        methods: {
            submit: function () {
                if (this.username == '' || this.password == '') {
                    alert("输入用户名或者密码")
                } else {
                    axios({
                        url: '/json/login',
                        method: 'post',
                        //发送格式为json
                        data: JSON.stringify({username: this.username, password: this.password}),
                        headers: {
                            'Content-Type': 'application/json;charset=UTF-8'
                        }
                    }).then(function (return_data) {
                        alert(return_data['data']['status']);
                        this.msg=return_data['data']['status']
                    }, function (return_data) {
                        //alert(return_data)
                    });
                }
            }
        }
    })
</script>
</body>
</html>